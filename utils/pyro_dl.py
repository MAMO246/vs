#MAZEN_MOHAMED
import base64
exec(base64.b64decode('IyAgUHlyb2dyYW0gLSBUZWxlZ3JhbSBNVFByb3RvIEFQSSBDbGllbnQgTGlicmFyeSBmb3IgUHl0aG9uCiMgIENvcHlyaWdodCAoQykgMjAxNy0yMDIxIERhbiA8aHR0cHM6Ly9naXRodWIuY29tL2RlbGl2cmFuY2U+CiMKIyAgVGhpcyBmaWxlIGlzIHBhcnQgb2YgUHlyb2dyYW0uCiMKIyAgUHlyb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeQojICBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBMZXNzZXIgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQKIyAgYnkgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3IKIyAgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi4KIwojICBQeXJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLAojICBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZgojICBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlCiMgIEdOVSBMZXNzZXIgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLgojCiMgIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBMZXNzZXIgR2VuZXJhbCBQdWJsaWMgTGljZW5zZQojICBhbG9uZyB3aXRoIFB5cm9ncmFtLiAgSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LgoKCiNodHRwczovL2dpdGh1Yi5jb20vcHlyb2dyYW0vcHlyb2dyYW0vYmxvYi80ZjU4NWMxNTZjMWEyYzY3MDc3OTNhOGFkN2YyZjExMTUxNWNhMjNiL3B5cm9ncmFtL2NsaWVudC5weSNMNDkyLUw1MTgKI2h0dHBzOi8vZ2l0aHViLmNvbS9weXJvZ3JhbS9weXJvZ3JhbS9ibG9iLzRmNTg1YzE1NmMxYTJjNjcwNzc5M2E4YWQ3ZjJmMTExNTE1Y2EyM2IvcHlyb2dyYW0vY2xpZW50LnB5I0w4MDYtMTA0NAoKI1B5cm9ncmFtIGRvd25sb2FkZXIgbW9kaWZpZWQgdG8gc3VpdCBteSBuZWVkcy4gCiNEb3dubG9hZHMgdGhlIGZpbGUgZnJvbSB0ZWxlZ3JhbSBzZXJ2ZXJzIGFuZCByZXR1cmVzIHRoZSBwYXRoIG9mIHRoZSBmaWxlIHdpdGhvdXQgd2FpdGluZyBmb3IgdGhlIHdob2xlIGRvd25sb2FkIHRvIGZpbmlzaC4KI0NvcHlyaWdodCAoQykgQHN1YmlucHMKCgpmcm9tIC5sb2dnZXIgaW1wb3J0IExPR0dFUgppbXBvcnQgYXN5bmNpbwppbXBvcnQgb3MKaW1wb3J0IHJlCmltcG9ydCBhc3luY2lvCmltcG9ydCBvcwppbXBvcnQgdGltZQpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQpmcm9tIGhhc2hsaWIgaW1wb3J0IHNoYTI1Ngpmcm9tIGJvdCBpbXBvcnQgYm90CmltcG9ydCBweXJvZ3JhbQpmcm9tIHB5cm9ncmFtIGltcG9ydCByYXcKZnJvbSBweXJvZ3JhbSBpbXBvcnQgdXRpbHMKZnJvbSBweXJvZ3JhbS5jcnlwdG8gaW1wb3J0IGFlcwpmcm9tIHB5cm9ncmFtLmVycm9ycyBpbXBvcnQgKAogICAgVm9sdW1lTG9jTm90Rm91bmQsCiAgICBBdXRoQnl0ZXNJbnZhbGlkCikKZnJvbSBweXJvZ3JhbS5zZXNzaW9uIGltcG9ydCgKICAgIEF1dGgsIAogICAgU2Vzc2lvbgopCmZyb20gcHlyb2dyYW0uZmlsZV9pZCBpbXBvcnQoCiAgICBGaWxlSWQsIAogICAgRmlsZVR5cGUsIAogICAgVGh1bWJuYWlsU291cmNlCikKZnJvbSBweXJvZ3JhbS5maWxlX2lkIGltcG9ydCAoCiAgICBGaWxlSWQsIAogICAgRmlsZVR5cGUsIAogICAgUEhPVE9fVFlQRVMKKQoKCkRFRkFVTFRfRE9XTkxPQURfRElSID0gImRvd25sb2Fkcy8iCgpjbGFzcyBEb3dubG9hZGVyKCk6CiAgICBkZWYgX19pbml0X18oCiAgICAgICAgc2VsZiwKICAgICAgICApOgogICAgICAgIHN1cGVyKCkuX19pbml0X18oKQogICAgICAgIHNlbGYuY2xpZW50ID0gYm90CgogICAgYXN5bmMgZGVmIHB5cm9fZGwoc2VsZiwgZmlsZV9pZCk6CiAgICAgICAgZmlsZV9pZF9vYmogPSBGaWxlSWQuZGVjb2RlKGZpbGVfaWQpCiAgICAgICAgZmlsZV90eXBlID0gZmlsZV9pZF9vYmouZmlsZV90eXBlCiAgICAgICAgbWltZV90eXBlID0gIiIKICAgICAgICBkYXRlID0gMAogICAgICAgIGZpbGVfbmFtZSA9ICIiCgogICAgICAgIGRpcmVjdG9yeSwgZmlsZV9uYW1lID0gb3MucGF0aC5zcGxpdChmaWxlX25hbWUpCiAgICAgICAgaWYgbm90IG9zLnBhdGguaXNhYnMoZmlsZV9uYW1lKToKICAgICAgICAgICAgZGlyZWN0b3J5ID0gc2VsZi5jbGllbnQuUEFSRU5UX0RJUiAvIChkaXJlY3Rvcnkgb3IgREVGQVVMVF9ET1dOTE9BRF9ESVIpCiAgICAgICAgaWYgbm90IGZpbGVfbmFtZToKICAgICAgICAgICAgZ3Vlc3NlZF9leHRlbnNpb24gPSBzZWxmLmNsaWVudC5ndWVzc19leHRlbnNpb24obWltZV90eXBlKQoKICAgICAgICAgICAgaWYgZmlsZV90eXBlIGluIFBIT1RPX1RZUEVTOgogICAgICAgICAgICAgICAgZXh0ZW5zaW9uID0gIi5qcGciCiAgICAgICAgICAgIGVsaWYgZmlsZV90eXBlID09IEZpbGVUeXBlLlZPSUNFOgogICAgICAgICAgICAgICAgZXh0ZW5zaW9uID0gZ3Vlc3NlZF9leHRlbnNpb24gb3IgIi5vZ2ciCiAgICAgICAgICAgIGVsaWYgZmlsZV90eXBlIGluIChGaWxlVHlwZS5WSURFTywgRmlsZVR5cGUuQU5JTUFUSU9OLCBGaWxlVHlwZS5WSURFT19OT1RFKToKICAgICAgICAgICAgICAgIGV4dGVuc2lvbiA9IGd1ZXNzZWRfZXh0ZW5zaW9uIG9yICIubXA0IgogICAgICAgICAgICBlbGlmIGZpbGVfdHlwZSA9PSBGaWxlVHlwZS5ET0NVTUVOVDoKICAgICAgICAgICAgICAgIGV4dGVuc2lvbiA9IGd1ZXNzZWRfZXh0ZW5zaW9uIG9yICIuemlwIgogICAgICAgICAgICBlbGlmIGZpbGVfdHlwZSA9PSBGaWxlVHlwZS5TVElDS0VSOgogICAgICAgICAgICAgICAgZXh0ZW5zaW9uID0gZ3Vlc3NlZF9leHRlbnNpb24gb3IgIi53ZWJwIgogICAgICAgICAgICBlbGlmIGZpbGVfdHlwZSA9PSBGaWxlVHlwZS5BVURJTzoKICAgICAgICAgICAgICAgIGV4dGVuc2lvbiA9IGd1ZXNzZWRfZXh0ZW5zaW9uIG9yICIubXAzIgogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgZXh0ZW5zaW9uID0gIi51bmtub3duIgoKICAgICAgICAgICAgZmlsZV9uYW1lID0gInt9X3t9X3t9e30iLmZvcm1hdCgKICAgICAgICAgICAgICAgIEZpbGVUeXBlKGZpbGVfaWRfb2JqLmZpbGVfdHlwZSkubmFtZS5sb3dlcigpLAogICAgICAgICAgICAgICAgZGF0ZXRpbWUuZnJvbXRpbWVzdGFtcChkYXRlIG9yIHRpbWUudGltZSgpKS5zdHJmdGltZSgiJVktJW0tJWRfJUgtJU0tJVMiKSwKICAgICAgICAgICAgICAgIHNlbGYuY2xpZW50LnJuZF9pZCgpLAogICAgICAgICAgICAgICAgZXh0ZW5zaW9uCiAgICAgICAgICAgICkKICAgICAgICBmaW5hbF9maWxlX3BhdGggPSBvcy5wYXRoLmFic3BhdGgocmUuc3ViKCJcXFxcIiwgIi8iLCBvcy5wYXRoLmpvaW4oZGlyZWN0b3J5LCBmaWxlX25hbWUpKSkKICAgICAgICBvcy5tYWtlZGlycyhkaXJlY3RvcnksIGV4aXN0X29rPVRydWUpCiAgICAgICAgZG93bmxvYWRlcnIgPSBzZWxmLmhhbmRsZV9kb3dubG9hZChmaWxlX2lkX29iaiwgZmluYWxfZmlsZV9wYXRoKQogICAgICAgIGFzeW5jaW8uZ2V0X2V2ZW50X2xvb3AoKS5jcmVhdGVfdGFzayhkb3dubG9hZGVycikKICAgICAgICByZXR1cm4gZmluYWxfZmlsZV9wYXRoCiAgICAKICAgIGFzeW5jIGRlZiBoYW5kbGVfZG93bmxvYWQoc2VsZiwgZmlsZV9pZF9vYmosIGZpbmFsX2ZpbGVfcGF0aCk6ICAKICAgICAgICB0cnk6CiAgICAgICAgICAgIGF3YWl0IHNlbGYuZ2V0X2ZpbGUoCiAgICAgICAgICAgICAgICBmaWxlX2lkPWZpbGVfaWRfb2JqLAogICAgICAgICAgICAgICAgZmlsZW5hbWU9ZmluYWxfZmlsZV9wYXRoCiAgICAgICAgICAgICkKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIExPR0dFUi5lcnJvcihzdHIoZSksIGV4Y19pbmZvPVRydWUpCgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBvcy5yZW1vdmUoZmluYWxfZmlsZV9wYXRoKQogICAgICAgICAgICBleGNlcHQgT1NFcnJvcjoKICAgICAgICAgICAgICAgIHBhc3MKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gZmluYWxfZmlsZV9wYXRoIG9yIE5vbmUKCiAgICBhc3luYyBkZWYgZ2V0X2ZpbGUoCiAgICAgICAgc2VsZiwKICAgICAgICBmaWxlX2lkOiBGaWxlSWQsCiAgICAgICAgZmlsZW5hbWU6IHN0ciwKICAgICkgLT4gc3RyOgogICAgICAgIGRjX2lkID0gZmlsZV9pZC5kY19pZAoKICAgICAgICBhc3luYyB3aXRoIHNlbGYuY2xpZW50Lm1lZGlhX3Nlc3Npb25zX2xvY2s6CiAgICAgICAgICAgIHNlc3Npb24gPSBzZWxmLmNsaWVudC5tZWRpYV9zZXNzaW9ucy5nZXQoZGNfaWQsIE5vbmUpCgogICAgICAgICAgICBpZiBzZXNzaW9uIGlzIE5vbmU6CiAgICAgICAgICAgICAgICBpZiBkY19pZCAhPSBhd2FpdCBzZWxmLmNsaWVudC5zdG9yYWdlLmRjX2lkKCk6CiAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbiA9IFNlc3Npb24oCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY2xpZW50LCBkY19pZCwgYXdhaXQgQXV0aChzZWxmLmNsaWVudCwgZGNfaWQsIGF3YWl0IHNlbGYuY2xpZW50LnN0b3JhZ2UudGVzdF9tb2RlKCkpLmNyZWF0ZSgpLAogICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBzZWxmLmNsaWVudC5zdG9yYWdlLnRlc3RfbW9kZSgpLCBpc19tZWRpYT1UcnVlCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgIGF3YWl0IHNlc3Npb24uc3RhcnQoKQoKICAgICAgICAgICAgICAgICAgICBmb3IgXyBpbiByYW5nZSgzKToKICAgICAgICAgICAgICAgICAgICAgICAgZXhwb3J0ZWRfYXV0aCA9IGF3YWl0IHNlbGYuY2xpZW50LnNlbmQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByYXcuZnVuY3Rpb25zLmF1dGguRXhwb3J0QXV0aG9yaXphdGlvbigKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkY19pZD1kY19pZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICApCgogICAgICAgICAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBzZXNzaW9uLnNlbmQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmF3LmZ1bmN0aW9ucy5hdXRoLkltcG9ydEF1dGhvcml6YXRpb24oCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPWV4cG9ydGVkX2F1dGguaWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ5dGVzPWV4cG9ydGVkX2F1dGguYnl0ZXMKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2VwdCBBdXRoQnl0ZXNJbnZhbGlkOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgc2Vzc2lvbi5zdG9wKCkKICAgICAgICAgICAgICAgICAgICAgICAgcmFpc2UgQXV0aEJ5dGVzSW52YWxpZAogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBzZXNzaW9uID0gU2Vzc2lvbigKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jbGllbnQsIGRjX2lkLCBhd2FpdCBzZWxmLmNsaWVudC5zdG9yYWdlLmF1dGhfa2V5KCksCiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHNlbGYuY2xpZW50LnN0b3JhZ2UudGVzdF9tb2RlKCksIGlzX21lZGlhPVRydWUKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgYXdhaXQgc2Vzc2lvbi5zdGFydCgpCgogICAgICAgICAgICAgICAgc2VsZi5jbGllbnQubWVkaWFfc2Vzc2lvbnNbZGNfaWRdID0gc2Vzc2lvbgoKICAgICAgICBmaWxlX3R5cGUgPSBmaWxlX2lkLmZpbGVfdHlwZQoKICAgICAgICBpZiBmaWxlX3R5cGUgPT0gRmlsZVR5cGUuQ0hBVF9QSE9UTzoKICAgICAgICAgICAgaWYgZmlsZV9pZC5jaGF0X2lkID4gMDoKICAgICAgICAgICAgICAgIHBlZXIgPSByYXcudHlwZXMuSW5wdXRQZWVyVXNlcigKICAgICAgICAgICAgICAgICAgICB1c2VyX2lkPWZpbGVfaWQuY2hhdF9pZCwKICAgICAgICAgICAgICAgICAgICBhY2Nlc3NfaGFzaD1maWxlX2lkLmNoYXRfYWNjZXNzX2hhc2gKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGlmIGZpbGVfaWQuY2hhdF9hY2Nlc3NfaGFzaCA9PSAwOgogICAgICAgICAgICAgICAgICAgIHBlZXIgPSByYXcudHlwZXMuSW5wdXRQZWVyQ2hhdCgKICAgICAgICAgICAgICAgICAgICAgICAgY2hhdF9pZD0tZmlsZV9pZC5jaGF0X2lkCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBwZWVyID0gcmF3LnR5cGVzLklucHV0UGVlckNoYW5uZWwoCiAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5uZWxfaWQ9dXRpbHMuZ2V0X2NoYW5uZWxfaWQoZmlsZV9pZC5jaGF0X2lkKSwKICAgICAgICAgICAgICAgICAgICAgICAgYWNjZXNzX2hhc2g9ZmlsZV9pZC5jaGF0X2FjY2Vzc19oYXNoCiAgICAgICAgICAgICAgICAgICAgKQoKICAgICAgICAgICAgbG9jYXRpb24gPSByYXcudHlwZXMuSW5wdXRQZWVyUGhvdG9GaWxlTG9jYXRpb24oCiAgICAgICAgICAgICAgICBwZWVyPXBlZXIsCiAgICAgICAgICAgICAgICB2b2x1bWVfaWQ9ZmlsZV9pZC52b2x1bWVfaWQsCiAgICAgICAgICAgICAgICBsb2NhbF9pZD1maWxlX2lkLmxvY2FsX2lkLAogICAgICAgICAgICAgICAgYmlnPWZpbGVfaWQudGh1bWJuYWlsX3NvdXJjZSA9PSBUaHVtYm5haWxTb3VyY2UuQ0hBVF9QSE9UT19CSUcKICAgICAgICAgICAgKQogICAgICAgIGVsaWYgZmlsZV90eXBlID09IEZpbGVUeXBlLlBIT1RPOgogICAgICAgICAgICBsb2NhdGlvbiA9IHJhdy50eXBlcy5JbnB1dFBob3RvRmlsZUxvY2F0aW9uKAogICAgICAgICAgICAgICAgaWQ9ZmlsZV9pZC5tZWRpYV9pZCwKICAgICAgICAgICAgICAgIGFjY2Vzc19oYXNoPWZpbGVfaWQuYWNjZXNzX2hhc2gsCiAgICAgICAgICAgICAgICBmaWxlX3JlZmVyZW5jZT1maWxlX2lkLmZpbGVfcmVmZXJlbmNlLAogICAgICAgICAgICAgICAgdGh1bWJfc2l6ZT1maWxlX2lkLnRodW1ibmFpbF9zaXplCiAgICAgICAgICAgICkKICAgICAgICBlbHNlOgogICAgICAgICAgICBsb2NhdGlvbiA9IHJhdy50eXBlcy5JbnB1dERvY3VtZW50RmlsZUxvY2F0aW9uKAogICAgICAgICAgICAgICAgaWQ9ZmlsZV9pZC5tZWRpYV9pZCwKICAgICAgICAgICAgICAgIGFjY2Vzc19oYXNoPWZpbGVfaWQuYWNjZXNzX2hhc2gsCiAgICAgICAgICAgICAgICBmaWxlX3JlZmVyZW5jZT1maWxlX2lkLmZpbGVfcmVmZXJlbmNlLAogICAgICAgICAgICAgICAgdGh1bWJfc2l6ZT1maWxlX2lkLnRodW1ibmFpbF9zaXplCiAgICAgICAgICAgICkKCiAgICAgICAgbGltaXQgPSAxMDI0ICogMTAyNAogICAgICAgIG9mZnNldCA9IDAKICAgICAgICBmaWxlX25hbWUgPSAiIgoKICAgICAgICB0cnk6CiAgICAgICAgICAgIHIgPSBhd2FpdCBzZXNzaW9uLnNlbmQoCiAgICAgICAgICAgICAgICByYXcuZnVuY3Rpb25zLnVwbG9hZC5HZXRGaWxlKAogICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uPWxvY2F0aW9uLAogICAgICAgICAgICAgICAgICAgIG9mZnNldD1vZmZzZXQsCiAgICAgICAgICAgICAgICAgICAgbGltaXQ9bGltaXQKICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICBzbGVlcF90aHJlc2hvbGQ9MzAKICAgICAgICAgICAgKQoKICAgICAgICAgICAgaWYgaXNpbnN0YW5jZShyLCByYXcudHlwZXMudXBsb2FkLkZpbGUpOgogICAgICAgICAgICAgICAgI3dpdGggdGVtcGZpbGUuTmFtZWRUZW1wb3JhcnlGaWxlKCJ3YiIsIGRlbGV0ZT1GYWxzZSkgYXMgZjoKICAgICAgICAgICAgICAgIHdpdGggb3BlbihmaWxlbmFtZSwgJ3diJykgYXMgZjoKICAgICAgICAgICAgICAgICAgICBmaWxlX25hbWUgPSBmaWxlbmFtZQogICAgICAgICAgICAgICAgICAgIHdoaWxlIFRydWU6CiAgICAgICAgICAgICAgICAgICAgICAgIGNodW5rID0gci5ieXRlcwoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgbm90IGNodW5rOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKCiAgICAgICAgICAgICAgICAgICAgICAgIGYud3JpdGUoY2h1bmspCgogICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgKz0gbGltaXQKICAgICAgICAgICAgICAgICAgICAgICAgciA9IGF3YWl0IHNlc3Npb24uc2VuZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhdy5mdW5jdGlvbnMudXBsb2FkLkdldEZpbGUoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb249bG9jYXRpb24sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0PW9mZnNldCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW1pdD1saW1pdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsZWVwX3RocmVzaG9sZD0zMAogICAgICAgICAgICAgICAgICAgICAgICApCgogICAgICAgICAgICBlbGlmIGlzaW5zdGFuY2UociwgcmF3LnR5cGVzLnVwbG9hZC5GaWxlQ2RuUmVkaXJlY3QpOgogICAgICAgICAgICAgICAgYXN5bmMgd2l0aCBzZWxmLmNsaWVudC5tZWRpYV9zZXNzaW9uc19sb2NrOgogICAgICAgICAgICAgICAgICAgIGNkbl9zZXNzaW9uID0gc2VsZi5jbGllbnQubWVkaWFfc2Vzc2lvbnMuZ2V0KHIuZGNfaWQsIE5vbmUpCgogICAgICAgICAgICAgICAgICAgIGlmIGNkbl9zZXNzaW9uIGlzIE5vbmU6CiAgICAgICAgICAgICAgICAgICAgICAgIGNkbl9zZXNzaW9uID0gU2Vzc2lvbigKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY2xpZW50LCByLmRjX2lkLCBhd2FpdCBBdXRoKHNlbGYuY2xpZW50LCByLmRjX2lkLCBhd2FpdCBzZWxmLmNsaWVudC5zdG9yYWdlLnRlc3RfbW9kZSgpKS5jcmVhdGUoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHNlbGYuY2xpZW50LnN0b3JhZ2UudGVzdF9tb2RlKCksIGlzX21lZGlhPVRydWUsIGlzX2Nkbj1UcnVlCiAgICAgICAgICAgICAgICAgICAgICAgICkKCiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGNkbl9zZXNzaW9uLnN0YXJ0KCkKCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY2xpZW50Lm1lZGlhX3Nlc3Npb25zW3IuZGNfaWRdID0gY2RuX3Nlc3Npb24KCiAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgd2l0aCBvcGVuKGZpbGVuYW1lLCAnd2InKSBhcyBmOgogICAgICAgICAgICAgICAgICAgICAgICBmaWxlX25hbWUgPSBmCiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIFRydWU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByMiA9IGF3YWl0IGNkbl9zZXNzaW9uLnNlbmQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmF3LmZ1bmN0aW9ucy51cGxvYWQuR2V0Q2RuRmlsZSgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZV90b2tlbj1yLmZpbGVfdG9rZW4sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldD1vZmZzZXQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbWl0PWxpbWl0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgKQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UocjIsIHJhdy50eXBlcy51cGxvYWQuQ2RuRmlsZVJldXBsb2FkTmVlZGVkKToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHNlc3Npb24uc2VuZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhdy5mdW5jdGlvbnMudXBsb2FkLlJldXBsb2FkQ2RuRmlsZSgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlX3Rva2VuPXIuZmlsZV90b2tlbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0X3Rva2VuPXIyLnJlcXVlc3RfdG9rZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2VwdCBWb2x1bWVMb2NOb3RGb3VuZDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNodW5rID0gcjIuYnl0ZXMKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIGh0dHBzOi8vY29yZS50ZWxlZ3JhbS5vcmcvY2RuI2RlY3J5cHRpbmctZmlsZXMKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlY3J5cHRlZF9jaHVuayA9IGFlcy5jdHIyNTZfZGVjcnlwdCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaHVuaywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByLmVuY3J5cHRpb25fa2V5LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ5dGVhcnJheSgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgci5lbmNyeXB0aW9uX2l2WzotNF0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyAob2Zmc2V0IC8vIDE2KS50b19ieXRlcyg0LCAiYmlnIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICApCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzaGVzID0gYXdhaXQgc2Vzc2lvbi5zZW5kKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhdy5mdW5jdGlvbnMudXBsb2FkLkdldENkbkZpbGVIYXNoZXMoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVfdG9rZW49ci5maWxlX3Rva2VuLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQ9b2Zmc2V0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgKQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgaHR0cHM6Ly9jb3JlLnRlbGVncmFtLm9yZy9jZG4jdmVyaWZ5aW5nLWZpbGVzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSwgaCBpbiBlbnVtZXJhdGUoaGFzaGVzKToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZG5fY2h1bmsgPSBkZWNyeXB0ZWRfY2h1bmtbaC5saW1pdCAqIGk6IGgubGltaXQgKiAoaSArIDEpXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2VydCBoLmhhc2ggPT0gc2hhMjU2KGNkbl9jaHVuaykuZGlnZXN0KCksIGYiSW52YWxpZCBDRE4gaGFzaCBwYXJ0IHtpfSIKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmLndyaXRlKGRlY3J5cHRlZF9jaHVuaykKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgKz0gbGltaXQKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBsZW4oY2h1bmspIDwgbGltaXQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgICAgICAgICBMT0dHRVIuZXJyb3IoZSwgZXhjX2luZm89VHJ1ZSkKICAgICAgICAgICAgICAgICAgICByYWlzZSBlCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShlLCBweXJvZ3JhbS5TdG9wVHJhbnNtaXNzaW9uKToKICAgICAgICAgICAgICAgIExPR0dFUi5lcnJvcihzdHIoZSksIGV4Y19pbmZvPVRydWUpCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIG9zLnJlbW92ZShmaWxlX25hbWUpCiAgICAgICAgICAgIGV4Y2VwdCBPU0Vycm9yOgogICAgICAgICAgICAgICAgcGFzcwoKICAgICAgICAgICAgcmV0dXJuICIiCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmV0dXJuIGZpbGVfbmFtZQ=='))
   





            


       

