#TeleGram: @ADIL721
import base64
exec(base64.b64decode('IyEvdXNyL2Jpbi9lbnYgcHl0aG9uMwojIENvcHlyaWdodCAoQykgQHN1YmlucHMKIyBUaGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeQojIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEFmZmVybyBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieQojIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yCiMgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi4KCiMgVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsCiMgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2YKIyBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlCiMgR05VIEFmZmVybyBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuCgojIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBBZmZlcm8gR2VuZXJhbCBQdWJsaWMgTGljZW5zZQojIGFsb25nIHdpdGggdGhpcyBwcm9ncmFtLiAgSWYgbm90LCBzZWUgPGh0dHBzOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi4KZnJvbSB1dGlscyBpbXBvcnQgTE9HR0VSCmZyb20gcHlyb2dyYW0udHlwZXMgaW1wb3J0IE1lc3NhZ2UKZnJvbSBjb25maWcgaW1wb3J0IENvbmZpZwpmcm9tIHB5cm9ncmFtIGltcG9ydCAoCiAgICBDbGllbnQsIAogICAgZmlsdGVycwopCmZyb20gdXRpbHMgaW1wb3J0ICgKICAgIGNsZWFyX2RiX3BsYXlsaXN0LCAKICAgIGdldF9wbGF5bGlzdF9zdHIsIAogICAgaXNfYWRtaW4sIAogICAgbXV0ZSwgCiAgICByZXN0YXJ0X3BsYXlvdXQsIAogICAgc2V0dGluZ3NfcGFuZWwsIAogICAgc2tpcCwgCiAgICBwYXVzZSwgCiAgICByZXN1bWUsIAogICAgdW5tdXRlLCAKICAgIHZvbHVtZSwgCiAgICBnZXRfYnV0dG9ucywgCiAgICBpc19hZG1pbiwgCiAgICBzZWVrX2ZpbGUsIAogICAgZGVsZXRlX21lc3NhZ2VzLAogICAgY2hhdF9maWx0ZXIsCiAgICB2b2x1bWVfYnV0dG9ucwopCgphZG1pbl9maWx0ZXI9ZmlsdGVycy5jcmVhdGUoaXNfYWRtaW4pICAgCgpAQ2xpZW50Lm9uX21lc3NhZ2UoZmlsdGVycy5jb21tYW5kKFsicGxheWxpc3QiLCBmInBsYXlsaXN0QHtDb25maWcuQk9UX1VTRVJOQU1FfSJdKSAmIGNoYXRfZmlsdGVyKQphc3luYyBkZWYgcGxheWVyKGNsaWVudCwgbWVzc2FnZSk6CiAgICBpZiBub3QgQ29uZmlnLkNBTExfU1RBVFVTOgogICAgICAgIGF3YWl0IG1lc3NhZ2UucmVwbHlfdGV4dCgKICAgICAgICAgICAgIlBsYXllciBpcyBpZGxlLCBzdGFydCB0aGUgcGxheWVyIHVzaW5nIGJlbG93IGJ1dHRvbi4g44Wk44Wk44Wk44WkIiwKICAgICAgICAgICAgZGlzYWJsZV93ZWJfcGFnZV9wcmV2aWV3PVRydWUsCiAgICAgICAgICAgIHJlcGx5X21hcmt1cD1hd2FpdCBnZXRfYnV0dG9ucygpCiAgICAgICAgKQogICAgICAgIGF3YWl0IGRlbGV0ZV9tZXNzYWdlcyhbbWVzc2FnZV0pCiAgICAgICAgcmV0dXJuCiAgICBwbCA9IGF3YWl0IGdldF9wbGF5bGlzdF9zdHIoKQogICAgaWYgbWVzc2FnZS5jaGF0LnR5cGUgPT0gInByaXZhdGUiOgogICAgICAgIGF3YWl0IG1lc3NhZ2UucmVwbHlfdGV4dCgKICAgICAgICAgICAgcGwsCiAgICAgICAgICAgIGRpc2FibGVfd2ViX3BhZ2VfcHJldmlldz1UcnVlLAogICAgICAgICAgICByZXBseV9tYXJrdXA9YXdhaXQgZ2V0X2J1dHRvbnMoKSwKICAgICAgICApCiAgICBlbHNlOgogICAgICAgIGlmIENvbmZpZy5tc2cuZ2V0KCdwbGF5ZXInKSBpcyBub3QgTm9uZToKICAgICAgICAgICAgYXdhaXQgQ29uZmlnLm1zZ1sncGxheWVyJ10uZGVsZXRlKCkKICAgICAgICBDb25maWcubXNnWydwbGF5ZXInXSA9IGF3YWl0IG1lc3NhZ2UucmVwbHlfdGV4dCgKICAgICAgICAgICAgcGwsCiAgICAgICAgICAgIGRpc2FibGVfd2ViX3BhZ2VfcHJldmlldz1UcnVlLAogICAgICAgICAgICByZXBseV9tYXJrdXA9YXdhaXQgZ2V0X2J1dHRvbnMoKSwKICAgICAgICApCiAgICBhd2FpdCBkZWxldGVfbWVzc2FnZXMoW21lc3NhZ2VdKQoKQENsaWVudC5vbl9tZXNzYWdlKGZpbHRlcnMuY29tbWFuZChbInNraXAiLCBmInNraXBAe0NvbmZpZy5CT1RfVVNFUk5BTUV9Il0pICYgYWRtaW5fZmlsdGVyICYgY2hhdF9maWx0ZXIpCmFzeW5jIGRlZiBza2lwX3RyYWNrKF8sIG06IE1lc3NhZ2UpOgogICAgbXNnPWF3YWl0IG0ucmVwbHkoJ9is2KfYsSDYqtiu2LfZiiDYp9mE2YHZitiv2YrZiOOAve+4jy4uLi4nKQogICAgaWYgbm90IENvbmZpZy5DQUxMX1NUQVRVUzoKICAgICAgICBhd2FpdCBtc2cuZWRpdCgKICAgICAgICAgICAgIlBsYXllciBpcyBpZGxlLCBzdGFydCB0aGUgcGxheWVyIHVzaW5nIGJlbG93IGJ1dHRvbi4g44Wk44Wk44Wk44WkIiwKICAgICAgICAgICAgZGlzYWJsZV93ZWJfcGFnZV9wcmV2aWV3PVRydWUsCiAgICAgICAgICAgIHJlcGx5X21hcmt1cD1hd2FpdCBnZXRfYnV0dG9ucygpCiAgICAgICAgKQogICAgICAgIGF3YWl0IGRlbGV0ZV9tZXNzYWdlcyhbbV0pCiAgICAgICAgcmV0dXJuCiAgICBpZiBub3QgQ29uZmlnLnBsYXlsaXN0OgogICAgICAgIGF3YWl0IG1zZy5lZGl0KCLYudiw2LHYp9mLINmC2KfYptmF2Kkg2KfZhNiq2LTYutmK2YQg2YHYp9ix2LrYqeKdlyIpCiAgICAgICAgYXdhaXQgZGVsZXRlX21lc3NhZ2VzKFttLCBtc2ddKQogICAgICAgIHJldHVybgogICAgaWYgbGVuKG0uY29tbWFuZCkgPT0gMToKICAgICAgICBhd2FpdCBza2lwKCkKICAgIGVsc2U6CiAgICAgICAgI2h0dHBzOi8vZ2l0aHViLmNvbS9jYWxsc211c2ljL3RndmMtdXNlcmJvdC9ibG9iL2Rldi9wbHVnaW5zL3ZjL3BsYXllci5weSNMMjY4LUwyODgKICAgICAgICB0cnk6CiAgICAgICAgICAgIGl0ZW1zID0gbGlzdChkaWN0LmZyb21rZXlzKG0uY29tbWFuZFsxOl0pKQogICAgICAgICAgICBpdGVtcyA9IFtpbnQoeCkgZm9yIHggaW4gaXRlbXMgaWYgeC5pc2RpZ2l0KCldCiAgICAgICAgICAgIGl0ZW1zLnNvcnQocmV2ZXJzZT1UcnVlKQogICAgICAgICAgICBmb3IgaSBpbiBpdGVtczoKICAgICAgICAgICAgICAgIGlmIDIgPD0gaSA8PSAobGVuKENvbmZpZy5wbGF5bGlzdCkgLSAxKToKICAgICAgICAgICAgICAgICAgICBhd2FpdCBtc2cuZWRpdChmIlN1Y2Nlc2Z1bGx5IFJlbW92ZWQgZnJvbSBQbGF5bGlzdC0ge2l9LiAqKntDb25maWcucGxheWxpc3RbaV1bMV19KioiKQogICAgICAgICAgICAgICAgICAgIGF3YWl0IGNsZWFyX2RiX3BsYXlsaXN0KHNvbmc9Q29uZmlnLnBsYXlsaXN0W2ldKQogICAgICAgICAgICAgICAgICAgIENvbmZpZy5wbGF5bGlzdC5wb3AoaSkKICAgICAgICAgICAgICAgICAgICBhd2FpdCBkZWxldGVfbWVzc2FnZXMoW20sIG1zZ10pCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIGF3YWl0IG1zZy5lZGl0KGYiWW91IGNhbnQgc2tpcCBmaXJzdCB0d28gc29uZ3MtIHtpfSIpCiAgICAgICAgICAgICAgICAgICAgYXdhaXQgZGVsZXRlX21lc3NhZ2VzKFttLCBtc2ddKQogICAgICAgIGV4Y2VwdCAoVmFsdWVFcnJvciwgVHlwZUVycm9yKToKICAgICAgICAgICAgYXdhaXQgbXNnLmVkaXQoIkludmFsaWQgaW5wdXQiKQogICAgICAgICAgICBhd2FpdCBkZWxldGVfbWVzc2FnZXMoW20sIG1zZ10pCiAgICBwbD1hd2FpdCBnZXRfcGxheWxpc3Rfc3RyKCkKICAgIGlmIG0uY2hhdC50eXBlID09ICJwcml2YXRlIjoKICAgICAgICBhd2FpdCBtc2cuZWRpdChwbCwgZGlzYWJsZV93ZWJfcGFnZV9wcmV2aWV3PVRydWUsIHJlcGx5X21hcmt1cD1hd2FpdCBnZXRfYnV0dG9ucygpKQogICAgZWxpZiBub3QgQ29uZmlnLkxPR19HUk9VUCBhbmQgbS5jaGF0LnR5cGUgPT0gInN1cGVyZ3JvdXAiOgogICAgICAgIGlmIENvbmZpZy5tc2cuZ2V0KCdwbGF5ZXInKToKICAgICAgICAgICAgYXdhaXQgQ29uZmlnLm1zZ1sncGxheWVyJ10uZGVsZXRlKCkKICAgICAgICBDb25maWcubXNnWydwbGF5ZXInXSA9IGF3YWl0IG1zZy5lZGl0KHBsLCBkaXNhYmxlX3dlYl9wYWdlX3ByZXZpZXc9VHJ1ZSwgcmVwbHlfbWFya3VwPWF3YWl0IGdldF9idXR0b25zKCkpCiAgICAgICAgYXdhaXQgZGVsZXRlX21lc3NhZ2VzKFttXSkKCkBDbGllbnQub25fbWVzc2FnZShmaWx0ZXJzLmNvbW1hbmQoWyJwYXVzZSIsIGYicGF1c2VAe0NvbmZpZy5CT1RfVVNFUk5BTUV9Il0pICYgYWRtaW5fZmlsdGVyICYgY2hhdF9maWx0ZXIpCmFzeW5jIGRlZiBwYXVzZV9wbGF5aW5nKF8sIG06IE1lc3NhZ2UpOgogICAgaWYgbm90IENvbmZpZy5DQUxMX1NUQVRVUzoKICAgICAgICBhd2FpdCBtLnJlcGx5X3RleHQoCiAgICAgICAgICAgICJQbGF5ZXIgaXMgaWRsZSwgc3RhcnQgdGhlIHBsYXllciB1c2luZyBiZWxvdyBidXR0b24uIOOFpOOFpOOFpOOFpOOFpCIsCiAgICAgICAgICAgIGRpc2FibGVfd2ViX3BhZ2VfcHJldmlldz1UcnVlLAogICAgICAgICAgICByZXBseV9tYXJrdXA9YXdhaXQgZ2V0X2J1dHRvbnMoKQogICAgICAgICkKICAgICAgICBhd2FpdCBkZWxldGVfbWVzc2FnZXMoW21dKQogICAgICAgIHJldHVybgogICAgaWYgQ29uZmlnLlBBVVNFOgogICAgICAgIGsgPSBhd2FpdCBtLnJlcGx5KCJBbHJlYWR5IFBhdXNlZCIpCiAgICAgICAgYXdhaXQgZGVsZXRlX21lc3NhZ2VzKFttLCBrXSkKICAgICAgICByZXR1cm4KICAgIGsgPSBhd2FpdCBtLnJlcGx5KCJQYXVzZWQgVmlkZW8gQ2FsbCIpCiAgICBhd2FpdCBwYXVzZSgpCiAgICBhd2FpdCBkZWxldGVfbWVzc2FnZXMoW20sIGtdKQogICAgCgpAQ2xpZW50Lm9uX21lc3NhZ2UoZmlsdGVycy5jb21tYW5kKFsicmVzdW1lIiwgZiJyZXN1bWVAe0NvbmZpZy5CT1RfVVNFUk5BTUV9Il0pICYgYWRtaW5fZmlsdGVyICYgY2hhdF9maWx0ZXIpCmFzeW5jIGRlZiByZXN1bWVfcGxheWluZyhfLCBtOiBNZXNzYWdlKToKICAgIGlmIG5vdCBDb25maWcuQ0FMTF9TVEFUVVM6CiAgICAgICAgYXdhaXQgbS5yZXBseV90ZXh0KAogICAgICAgICAgICAiUGxheWVyIGlzIGlkbGUsIHN0YXJ0IHRoZSBwbGF5ZXIgdXNpbmcgYmVsb3cgYnV0dG9uLiDjhaTjhaTjhaTjhaTjhaQiLAogICAgICAgICAgICBkaXNhYmxlX3dlYl9wYWdlX3ByZXZpZXc9VHJ1ZSwKICAgICAgICAgICAgcmVwbHlfbWFya3VwPWF3YWl0IGdldF9idXR0b25zKCkKICAgICAgICApCiAgICAgICAgYXdhaXQgZGVsZXRlX21lc3NhZ2VzKFttXSkKICAgICAgICByZXR1cm4KICAgIGlmIG5vdCBDb25maWcuUEFVU0U6CiAgICAgICAgayA9IGF3YWl0IG0ucmVwbHkoIk5vdGhpbmcgcGF1c2VkIHRvIHJlc3VtZSIpCiAgICAgICAgYXdhaXQgZGVsZXRlX21lc3NhZ2VzKFttLCBrXSkKICAgICAgICByZXR1cm4KICAgIGsgPSBhd2FpdCBtLnJlcGx5KCJSZXN1bWVkIFZpZGVvIENhbGwiKQogICAgYXdhaXQgcmVzdW1lKCkKICAgIGF3YWl0IGRlbGV0ZV9tZXNzYWdlcyhbbSwga10pCiAgICAKCgpAQ2xpZW50Lm9uX21lc3NhZ2UoZmlsdGVycy5jb21tYW5kKFsndm9sdW1lJywgZiJ2b2x1bWVAe0NvbmZpZy5CT1RfVVNFUk5BTUV9Il0pICYgYWRtaW5fZmlsdGVyICYgY2hhdF9maWx0ZXIpCmFzeW5jIGRlZiBzZXRfdm9sKF8sIG06IE1lc3NhZ2UpOgogICAgaWYgbm90IENvbmZpZy5DQUxMX1NUQVRVUzoKICAgICAgICBhd2FpdCBtLnJlcGx5X3RleHQoCiAgICAgICAgICAgICJQbGF5ZXIgaXMgaWRsZSwgc3RhcnQgdGhlIHBsYXllciB1c2luZyBiZWxvdyBidXR0b24uIOOFpOOFpOOFpOOFpOOFpOOFpCIsCiAgICAgICAgICAgIGRpc2FibGVfd2ViX3BhZ2VfcHJldmlldz1UcnVlLAogICAgICAgICAgICByZXBseV9tYXJrdXA9YXdhaXQgZ2V0X2J1dHRvbnMoKQogICAgICAgICkKICAgICAgICBhd2FpdCBkZWxldGVfbWVzc2FnZXMoW21dKQogICAgICAgIHJldHVybgogICAgaWYgbGVuKG0uY29tbWFuZCkgPCAyOgogICAgICAgIGF3YWl0IG0ucmVwbHlfdGV4dCgnQ2hhbmdlIFZvbHVtZSBvZiBZb3VyIFZDUGxheWVyLiDjhaTjhaTjhaTjhaTjhaTjhaTjhaTjhaTjhaTjhaTjhaTjhaTjhaTjhaTjhaTjhaTjhaTjhaTjhaTjhaTjhaTjhaTjhaTjhaQnLCByZXBseV9tYXJrdXA9YXdhaXQgdm9sdW1lX2J1dHRvbnMoKSkKICAgICAgICBhd2FpdCBkZWxldGVfbWVzc2FnZXMoW21dKQogICAgICAgIHJldHVybgogICAgaWYgbm90IDEgPCBpbnQobS5jb21tYW5kWzFdKSA8IDIwMDoKICAgICAgICBhd2FpdCBtLnJlcGx5X3RleHQoZiJPbmx5IDEtMjAwIHJhbmdlIGlzIGFjY2VwZXRlZC4g44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44WkIiwgcmVwbHlfbWFya3VwPWF3YWl0IHZvbHVtZV9idXR0b25zKCkpCiAgICBlbHNlOgogICAgICAgIGF3YWl0IHZvbHVtZShpbnQobS5jb21tYW5kWzFdKSkKICAgICAgICBhd2FpdCBtLnJlcGx5X3RleHQoZiJTdWNjZXNmdWxseSBzZXQgdm9sdW1lIHRvIHttLmNvbW1hbmRbMV19IOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpCIsIHJlcGx5X21hcmt1cD1hd2FpdCB2b2x1bWVfYnV0dG9ucygpKQogICAgYXdhaXQgZGVsZXRlX21lc3NhZ2VzKFttXSkKCiAgICAKCgpAQ2xpZW50Lm9uX21lc3NhZ2UoZmlsdGVycy5jb21tYW5kKFsndmNtdXRlJywgZiJ2Y211dGVAe0NvbmZpZy5CT1RfVVNFUk5BTUV9Il0pICYgYWRtaW5fZmlsdGVyICYgY2hhdF9maWx0ZXIpCmFzeW5jIGRlZiBzZXRfbXV0ZShfLCBtOiBNZXNzYWdlKToKICAgIGlmIG5vdCBDb25maWcuQ0FMTF9TVEFUVVM6CiAgICAgICAgYXdhaXQgbS5yZXBseV90ZXh0KAogICAgICAgICAgICAiUGxheWVyIGlzIGlkbGUsIHN0YXJ0IHRoZSBwbGF5ZXIgdXNpbmcgYmVsb3cgYnV0dG9uLiDjhaTjhaTjhaTjhaTjhaTjhaTjhaTjhaQiLAogICAgICAgICAgICBkaXNhYmxlX3dlYl9wYWdlX3ByZXZpZXc9VHJ1ZSwKICAgICAgICAgICAgcmVwbHlfbWFya3VwPWF3YWl0IGdldF9idXR0b25zKCkKICAgICAgICApCiAgICAgICAgYXdhaXQgZGVsZXRlX21lc3NhZ2VzKFttXSkKICAgICAgICByZXR1cm4KICAgIGlmIENvbmZpZy5NVVRFRDoKICAgICAgICBrID0gYXdhaXQgbS5yZXBseV90ZXh0KCJBbHJlYWR5IG11dGVkLiIpCiAgICAgICAgYXdhaXQgZGVsZXRlX21lc3NhZ2VzKFttLCBrXSkKICAgICAgICByZXR1cm4KICAgIGs9YXdhaXQgbXV0ZSgpCiAgICBpZiBrOgogICAgICAgIGsgPSBhd2FpdCBtLnJlcGx5X3RleHQoZiIg8J+UhyBTdWNjZXNmdWxseSBNdXRlZCAiKQogICAgICAgIGF3YWl0IGRlbGV0ZV9tZXNzYWdlcyhbbSwga10pCiAgICBlbHNlOgogICAgICAgIGsgPSBhd2FpdCBtLnJlcGx5X3RleHQoIkFscmVhZHkgbXV0ZWQuIikKICAgICAgICBhd2FpdCBkZWxldGVfbWVzc2FnZXMoW20sIGtdKQogICAgCkBDbGllbnQub25fbWVzc2FnZShmaWx0ZXJzLmNvbW1hbmQoWyd2Y3VubXV0ZScsIGYidmN1bm11dGVAe0NvbmZpZy5CT1RfVVNFUk5BTUV9Il0pICYgYWRtaW5fZmlsdGVyICYgY2hhdF9maWx0ZXIpCmFzeW5jIGRlZiBzZXRfdW5tdXRlKF8sIG06IE1lc3NhZ2UpOgogICAgaWYgbm90IENvbmZpZy5DQUxMX1NUQVRVUzoKICAgICAgICBhd2FpdCBtLnJlcGx5X3RleHQoCiAgICAgICAgICAgICJQbGF5ZXIgaXMgaWRsZSwgc3RhcnQgdGhlIHBsYXllciB1c2luZyBiZWxvdyBidXR0b24uIOOFpOOFpOOFpOOFpOOFpCIsCiAgICAgICAgICAgIGRpc2FibGVfd2ViX3BhZ2VfcHJldmlldz1UcnVlLAogICAgICAgICAgICByZXBseV9tYXJrdXA9YXdhaXQgZ2V0X2J1dHRvbnMoKQogICAgICAgICkKICAgICAgICBhd2FpdCBkZWxldGVfbWVzc2FnZXMoW21dKQogICAgICAgIHJldHVybgogICAgaWYgbm90IENvbmZpZy5NVVRFRDoKICAgICAgICBrID0gYXdhaXQgbS5yZXBseSgiU3RyZWFtIGFscmVhZHkgdW5tdXRlZC4iKQogICAgICAgIGF3YWl0IGRlbGV0ZV9tZXNzYWdlcyhbbSwga10pCiAgICAgICAgcmV0dXJuCiAgICBrPWF3YWl0IHVubXV0ZSgpCiAgICBpZiBrOgogICAgICAgIGsgPSBhd2FpdCBtLnJlcGx5X3RleHQoZiLwn5SKINiq2YXYqiDYp9i52KfYr9ipINin2YTYtdmI2Kog2KjZhtis2KfYreOAve+4jyAiKQogICAgICAgIGF3YWl0IGRlbGV0ZV9tZXNzYWdlcyhbbSwga10pCiAgICAgICAgcmV0dXJuCiAgICBlbHNlOgogICAgICAgIGs9YXdhaXQgbS5yZXBseV90ZXh0KCJOb3QgbXV0ZWQsIGFscmVhZHkgdW5tdXRlZC4iKSAgICAKICAgICAgICBhd2FpdCBkZWxldGVfbWVzc2FnZXMoW20sIGtdKQoKCkBDbGllbnQub25fbWVzc2FnZShmaWx0ZXJzLmNvbW1hbmQoWyJyZXBsYXkiLCBmInJlcGxheUB7Q29uZmlnLkJPVF9VU0VSTkFNRX0iXSkgJiBhZG1pbl9maWx0ZXIgJiBjaGF0X2ZpbHRlcikKYXN5bmMgZGVmIHJlcGxheV9wbGF5b3V0KGNsaWVudCwgbTogTWVzc2FnZSk6CiAgICBtc2cgPSBhd2FpdCBtLnJlcGx5KCdDaGVja2luZyBwbGF5ZXInKQogICAgaWYgbm90IENvbmZpZy5DQUxMX1NUQVRVUzoKICAgICAgICBhd2FpdCBtc2cuZWRpdCgKICAgICAgICAgICAgIlBsYXllciBpcyBpZGxlLCBzdGFydCB0aGUgcGxheWVyIHVzaW5nIGJlbG93IGJ1dHRvbi4g44Wk44Wk44Wk44Wk44WkIiwKICAgICAgICAgICAgZGlzYWJsZV93ZWJfcGFnZV9wcmV2aWV3PVRydWUsCiAgICAgICAgICAgIHJlcGx5X21hcmt1cD1hd2FpdCBnZXRfYnV0dG9ucygpCiAgICAgICAgKQogICAgICAgIGF3YWl0IGRlbGV0ZV9tZXNzYWdlcyhbbV0pCiAgICAgICAgcmV0dXJuCiAgICBhd2FpdCBtc2cuZWRpdChmIlJlcGxheWluZyBmcm9tIGJlZ2luaW5nIikKICAgIGF3YWl0IHJlc3RhcnRfcGxheW91dCgpCiAgICBhd2FpdCBkZWxldGVfbWVzc2FnZXMoW20sIG1zZ10pCgoKQENsaWVudC5vbl9tZXNzYWdlKGZpbHRlcnMuY29tbWFuZChbInBsYXllciIsIGYicGxheWVyQHtDb25maWcuQk9UX1VTRVJOQU1FfSJdKSAmIGNoYXRfZmlsdGVyKQphc3luYyBkZWYgc2hvd19wbGF5ZXIoY2xpZW50LCBtOiBNZXNzYWdlKToKICAgIGlmIG5vdCBDb25maWcuQ0FMTF9TVEFUVVM6CiAgICAgICAgYXdhaXQgbS5yZXBseV90ZXh0KAogICAgICAgICAgICAiUGxheWVyIGlzIGlkbGUsIHN0YXJ0IHRoZSBwbGF5ZXIgdXNpbmcgYmVsb3cgYnV0dG9uLiDjhaTjhaTjhaTjhaTjhaQiLAogICAgICAgICAgICBkaXNhYmxlX3dlYl9wYWdlX3ByZXZpZXc9VHJ1ZSwKICAgICAgICAgICAgcmVwbHlfbWFya3VwPWF3YWl0IGdldF9idXR0b25zKCkKICAgICAgICApCiAgICAgICAgYXdhaXQgZGVsZXRlX21lc3NhZ2VzKFttXSkKICAgICAgICByZXR1cm4KICAgIGRhdGE9Q29uZmlnLkRBVEEuZ2V0KCdGSUxFX0RBVEEnKQogICAgaWYgbm90IGRhdGEuZ2V0KCdkdXInLCAwKSBvciBcCiAgICAgICAgZGF0YS5nZXQoJ2R1cicpID09IDA6CiAgICAgICAgdGl0bGU9IjxiPlBsYXlpbmcgTGl2ZSBTdHJlYW08L2I+IOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpCIKICAgIGVsc2U6CiAgICAgICAgaWYgQ29uZmlnLnBsYXlsaXN0OgogICAgICAgICAgICB0aXRsZT1mIjxiPntDb25maWcucGxheWxpc3RbMF1bMV19PC9iPiDjhaTjhaTjhaTjhaRcbiDjhaTjhaTjhaTjhaTjhaTjhaTjhaTjhaTjhaTjhaTjhaTjhaTjhaTjhaTjhaTjhaTjhaTjhaTjhaTjhaTjhaTjhaTjhaTjhaTjhaTjhaTjhaTjhaTjhaTjhaTjhaTjhaTjhaTjhaTjhaTjhaTjhaTjhaTjhaTjhaTjhaTjhaTjhaTjhaQiCiAgICAgICAgZWxpZiBDb25maWcuU1RSRUFNX0xJTks6CiAgICAgICAgICAgIHRpdGxlPWYiPGI+U3RyZWFtIFVzaW5nIFtVcmxdKHtkYXRhWydmaWxlJ119KSA8L2I+IOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpCIKICAgICAgICBlbHNlOgogICAgICAgICAgICB0aXRsZT1mIjxiPlN0cmVhbWluZyBTdGFydHVwIFtzdHJlYW1dKHtDb25maWcuU1RSRUFNX1VSTH0pPC9iPiDjhaTjhaTjhaTjhaTjhaTjhaTjhaTjhaTjhaTjhaTjhaTjhaTjhaTjhaTjhaTjhaTjhaTjhaTjhaTjhaTjhaTjhaTjhaTjhaQiCiAgICBpZiBtLmNoYXQudHlwZSA9PSAicHJpdmF0ZSI6CiAgICAgICAgYXdhaXQgbS5yZXBseV90ZXh0KAogICAgICAgICAgICB0aXRsZSwKICAgICAgICAgICAgZGlzYWJsZV93ZWJfcGFnZV9wcmV2aWV3PVRydWUsCiAgICAgICAgICAgIHJlcGx5X21hcmt1cD1hd2FpdCBnZXRfYnV0dG9ucygpCiAgICAgICAgKQogICAgZWxzZToKICAgICAgICBpZiBDb25maWcubXNnLmdldCgncGxheWVyJykgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIGF3YWl0IENvbmZpZy5tc2dbJ3BsYXllciddLmRlbGV0ZSgpCiAgICAgICAgQ29uZmlnLm1zZ1sncGxheWVyJ10gPSBhd2FpdCBtLnJlcGx5X3RleHQoCiAgICAgICAgICAgIHRpdGxlLAogICAgICAgICAgICBkaXNhYmxlX3dlYl9wYWdlX3ByZXZpZXc9VHJ1ZSwKICAgICAgICAgICAgcmVwbHlfbWFya3VwPWF3YWl0IGdldF9idXR0b25zKCkKICAgICAgICApCiAgICAgICAgYXdhaXQgZGVsZXRlX21lc3NhZ2VzKFttXSkKCgpAQ2xpZW50Lm9uX21lc3NhZ2UoZmlsdGVycy5jb21tYW5kKFsic2VlayIsIGYic2Vla0B7Q29uZmlnLkJPVF9VU0VSTkFNRX0iXSkgJiBhZG1pbl9maWx0ZXIgJiBjaGF0X2ZpbHRlcikKYXN5bmMgZGVmIHNlZWtfcGxheW91dChjbGllbnQsIG06IE1lc3NhZ2UpOgogICAgaWYgbm90IENvbmZpZy5DQUxMX1NUQVRVUzoKICAgICAgICBhd2FpdCBtLnJlcGx5X3RleHQoCiAgICAgICAgICAgICJQbGF5ZXIgaXMgaWRsZSwgc3RhcnQgdGhlIHBsYXllciB1c2luZyBiZWxvdyBidXR0b24uIOOFpOOFpOOFpCDjhaTjhaQiLAogICAgICAgICAgICBkaXNhYmxlX3dlYl9wYWdlX3ByZXZpZXc9VHJ1ZSwKICAgICAgICAgICAgcmVwbHlfbWFya3VwPWF3YWl0IGdldF9idXR0b25zKCkKICAgICAgICApCiAgICAgICAgYXdhaXQgZGVsZXRlX21lc3NhZ2VzKFttXSkKICAgICAgICByZXR1cm4KICAgIGRhdGE9Q29uZmlnLkRBVEEuZ2V0KCdGSUxFX0RBVEEnKQogICAgaz1hd2FpdCBtLnJlcGx5KCLYrNin2LEg2YXYrdin2YjZhNipINin2YTYqtmC2K/ZitmF4pqZ77iPLi4iKQogICAgaWYgbm90IGRhdGEuZ2V0KCdkdXInLCAwKSBvciBcCiAgICAgICAgZGF0YS5nZXQoJ2R1cicpID09IDA6CiAgICAgICAgYXdhaXQgay5lZGl0KCJUaGlzIHN0cmVhbSBjYW50IGJlIHNlZWtlZC4iKQogICAgICAgIGF3YWl0IGRlbGV0ZV9tZXNzYWdlcyhbbSwga10pCiAgICAgICAgcmV0dXJuCiAgICBpZiAnICcgaW4gbS50ZXh0OgogICAgICAgIGksIHRpbWUgPSBtLnRleHQuc3BsaXQoIiAiKQogICAgICAgIHRyeToKICAgICAgICAgICAgdGltZT1pbnQodGltZSkKICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgIGF3YWl0IGsuZWRpdCgnSW52YWxpZCB0aW1lIHNwZWNpZmllZCcpCiAgICAgICAgICAgIGF3YWl0IGRlbGV0ZV9tZXNzYWdlcyhbbSwga10pCiAgICAgICAgICAgIHJldHVybgogICAgICAgIG55YXYsIHN0cmluZz1hd2FpdCBzZWVrX2ZpbGUodGltZSkKICAgICAgICBpZiBueWF2ID09IEZhbHNlOgogICAgICAgICAgICBhd2FpdCBrLmVkaXQoc3RyaW5nKQogICAgICAgICAgICBhd2FpdCBkZWxldGVfbWVzc2FnZXMoW20sIGtdKQogICAgICAgICAgICByZXR1cm4KICAgICAgICBpZiBub3QgZGF0YS5nZXQoJ2R1cicsIDApXAogICAgICAgICAgICBvciBkYXRhLmdldCgnZHVyJykgPT0gMDoKICAgICAgICAgICAgdGl0bGU9IjxiPlBsYXlpbmcgTGl2ZSBTdHJlYW08L2I+IOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpOOFpCIKICAgICAgICBlbHNlOgogICAgICAgICAgICBpZiBDb25maWcucGxheWxpc3Q6CiAgICAgICAgICAgICAgICB0aXRsZT1mIjxiPntDb25maWcucGxheWxpc3RbMF1bMV19PC9iPlxu44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44WkIgogICAgICAgICAgICBlbGlmIENvbmZpZy5TVFJFQU1fTElOSzoKICAgICAgICAgICAgICAgIHRpdGxlPWYiPGI+U3RyZWFtIFVzaW5nIFtVcmxdKHtkYXRhWydmaWxlJ119KTwvYj4g44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44WkIgogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgdGl0bGU9ZiI8Yj5TdHJlYW1pbmcgU3RhcnR1cCBbc3RyZWFtXSh7Q29uZmlnLlNUUkVBTV9VUkx9KTwvYj4g44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44WkIgogICAgICAgIGlmIENvbmZpZy5tc2cuZ2V0KCdwbGF5ZXInKToKICAgICAgICAgICAgYXdhaXQgQ29uZmlnLm1zZ1sncGxheWVyJ10uZGVsZXRlKCkgIAogICAgICAgIENvbmZpZy5tc2dbJ3BsYXllciddID0gYXdhaXQgay5lZGl0KGYi8J+OuHt0aXRsZX0iLCByZXBseV9tYXJrdXA9YXdhaXQgZ2V0X2J1dHRvbnMoKSwgZGlzYWJsZV93ZWJfcGFnZV9wcmV2aWV3PVRydWUpCiAgICAgICAgYXdhaXQgZGVsZXRlX21lc3NhZ2VzKFttXSkKICAgIGVsc2U6CiAgICAgICAgYXdhaXQgay5lZGl0KCdObyB0aW1lIHNwZWNpZmllZCcpCiAgICAgICAgYXdhaXQgZGVsZXRlX21lc3NhZ2VzKFttLCBrXSkKCgpAQ2xpZW50Lm9uX21lc3NhZ2UoZmlsdGVycy5jb21tYW5kKFsic2V0dGluZ3MiLCBmInNldHRpbmdzQHtDb25maWcuQk9UX1VTRVJOQU1FfSJdKSAmIGFkbWluX2ZpbHRlciAmIGNoYXRfZmlsdGVyKQphc3luYyBkZWYgc2V0dGluZ3MoY2xpZW50LCBtOiBNZXNzYWdlKToKICAgIGF3YWl0IG0ucmVwbHkoZiLYs9mI2YEg2KrYrNivINmH2YbYpyDYp9i52K/Yp9iv2KfYqiDYp9mE2KrYrdmD2YUg2KjYp9mE2KjZiNiqINin2YTYrtin2LUg2KjZgy4g44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44Wk44WkIiwgcmVwbHlfbWFya3VwPWF3YWl0IHNldHRpbmdzX3BhbmVsKCksIGRpc2FibGVfd2ViX3BhZ2VfcHJldmlldz1UcnVlKQogICAgYXdhaXQgZGVsZXRlX21lc3NhZ2VzKFttXSkK'))