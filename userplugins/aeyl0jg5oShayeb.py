#TeleGram: @ADIL721
import base64
exec(base64.b64decode('IyEvdXNyL2Jpbi9lbnYgcHl0aG9uMwojIENvcHlyaWdodCAoQykgQHN1YmlucHMKIyBUaGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeQojIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEFmZmVybyBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieQojIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yCiMgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi4KCiMgVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsCiMgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2YKIyBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlCiMgR05VIEFmZmVybyBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuCgojIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBBZmZlcm8gR2VuZXJhbCBQdWJsaWMgTGljZW5zZQojIGFsb25nIHdpdGggdGhpcyBwcm9ncmFtLiAgSWYgbm90LCBzZWUgPGh0dHBzOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi4KZnJvbSB1dGlscyBpbXBvcnQgTE9HR0VSCmZyb20gcHlyb2dyYW0uZXJyb3JzIGltcG9ydCBCb3RJbmxpbmVEaXNhYmxlZApmcm9tIHB5cm9ncmFtIGltcG9ydCBDbGllbnQsIGZpbHRlcnMKZnJvbSBjb25maWcgaW1wb3J0IENvbmZpZwpmcm9tIHVzZXIgaW1wb3J0IGdyb3VwX2NhbGwKaW1wb3J0IHRpbWUKZnJvbSBhc3luY2lvIGltcG9ydCBzbGVlcApmcm9tIHB5cm9ncmFtLnJhdy5iYXNlIGltcG9ydCBVcGRhdGUKZnJvbSBweXJvZ3JhbS5yYXcuZnVuY3Rpb25zLmNoYW5uZWxzIGltcG9ydCBHZXRGdWxsQ2hhbm5lbApmcm9tIHB5dGdjYWxscyBpbXBvcnQgUHlUZ0NhbGxzCmZyb20gcHl0Z2NhbGxzLnR5cGVzIGltcG9ydCBVcGRhdGUKZnJvbSBweXJvZ3JhbS5yYXcudHlwZXMgaW1wb3J0ICgKICAgIFVwZGF0ZUdyb3VwQ2FsbCwgCiAgICBHcm91cENhbGxEaXNjYXJkZWQsIAogICAgVXBkYXRlR3JvdXBDYWxsUGFydGljaXBhbnRzCikKZnJvbSBweXRnY2FsbHMudHlwZXMuZ3JvdXBzIGltcG9ydCAoCiAgICAgICAgSm9pbmVkVm9pY2VDaGF0LCAKICAgICAgICBMZWZ0Vm9pY2VDaGF0CiAgICApCmZyb20gcHl0Z2NhbGxzLnR5cGVzLnN0cmVhbSBpbXBvcnQgKAogICAgUGF1c2VkU3RyZWFtLCAKICAgIFJlc3VtZWRTdHJlYW0sIAogICAgTXV0ZWRTdHJlYW0sIAogICAgVW5NdXRlZFN0cmVhbSwgCiAgICBTdHJlYW1BdWRpb0VuZGVkLCAKICAgIFN0cmVhbVZpZGVvRW5kZWQKKQpmcm9tIHV0aWxzIGltcG9ydCAoCiAgICBzdGFydF9yZWNvcmRfc3RyZWFtLAogICAgc3RvcF9yZWNvcmRpbmcsIAogICAgZWRpdF90aXRsZSwgCiAgICBzdHJlYW1fZnJvbV9saW5rLCAKICAgIGxlYXZlX2NhbGwsIAogICAgc3RhcnRfc3RyZWFtLCAKICAgIHNraXAsIAogICAgc3luY190b19kYiwKICAgIHNjaGVkdWxlcgopCgphc3luYyBkZWYgaXNfcmVwbHkoXywgY2xpZW50LCBtZXNzYWdlKToKICAgIGlmIENvbmZpZy5SRVBMWV9QTToKICAgICAgICByZXR1cm4gVHJ1ZQogICAgZWxzZToKICAgICAgICByZXR1cm4gRmFsc2UKcmVwbHlfZmlsdGVyPWZpbHRlcnMuY3JlYXRlKGlzX3JlcGx5KQoKRFVNQkVEPVtdCmFzeW5jIGRlZiBkdW1iX2l0KF8sIGNsaWVudCwgbWVzc2FnZSk6CiAgICBpZiBDb25maWcuUkVDT1JESU5HX0RVTVAgYW5kIENvbmZpZy5MSVNURU46CiAgICAgICAgcmV0dXJuIFRydWUKICAgIGVsc2U6CiAgICAgICAgcmV0dXJuIEZhbHNlCnJlY19maWx0ZXI9ZmlsdGVycy5jcmVhdGUoZHVtYl9pdCkKCkBDbGllbnQub25fbWVzc2FnZShyZXBseV9maWx0ZXIgJiBmaWx0ZXJzLnByaXZhdGUgJiB+ZmlsdGVycy5ib3QgJiBmaWx0ZXJzLmluY29taW5nICYgfmZpbHRlcnMuc2VydmljZSAmIH5maWx0ZXJzLm1lICYgfmZpbHRlcnMuY2hhdChbNzc3MDAwLCA0NTQwMDBdKSkKYXN5bmMgZGVmIHJlcGx5KGNsaWVudCwgbWVzc2FnZSk6IAogICAgdHJ5OgogICAgICAgIGlubGluZSA9IGF3YWl0IGNsaWVudC5nZXRfaW5saW5lX2JvdF9yZXN1bHRzKENvbmZpZy5CT1RfVVNFUk5BTUUsICJFVEhPX09SVVRIQU5fUE1fVkFOTlUiKQogICAgICAgIG09YXdhaXQgY2xpZW50LnNlbmRfaW5saW5lX2JvdF9yZXN1bHQoCiAgICAgICAgICAgIG1lc3NhZ2UuY2hhdC5pZCwKICAgICAgICAgICAgcXVlcnlfaWQ9aW5saW5lLnF1ZXJ5X2lkLAogICAgICAgICAgICByZXN1bHRfaWQ9aW5saW5lLnJlc3VsdHNbMF0uaWQsCiAgICAgICAgICAgIGhpZGVfdmlhPVRydWUKICAgICAgICAgICAgKQogICAgICAgIG9sZD1Db25maWcubXNnLmdldChtZXNzYWdlLmNoYXQuaWQpCiAgICAgICAgaWYgb2xkOgogICAgICAgICAgICBhd2FpdCBjbGllbnQuZGVsZXRlX21lc3NhZ2VzKG1lc3NhZ2UuY2hhdC5pZCwgW29sZFsibXNnIl0sIG9sZFsicyJdXSkKICAgICAgICBDb25maWcubXNnW21lc3NhZ2UuY2hhdC5pZF09eyJtc2ciOm0udXBkYXRlc1sxXS5tZXNzYWdlLmlkLCAicyI6bWVzc2FnZS5tZXNzYWdlX2lkfQogICAgZXhjZXB0IEJvdElubGluZURpc2FibGVkOgogICAgICAgIExPR0dFUi5lcnJvcihmIkVycm9yOiBJbmxpbmUgTW9kZSBmb3IgQHtDb25maWcuQk9UX1VTRVJOQU1FfSBpcyBub3QgZW5hYmxlZC4gRW5hYmxlIGZyb20gQEJvdGZhdGhlciB0byBlbmFibGUgUE0gUGVybWl0LiIpCiAgICAgICAgYXdhaXQgbWVzc2FnZS5yZXBseShmIntDb25maWcuUkVQTFlfTUVTU0FHRX1cblxuPGI+2LnYsNix2KfZiyDZhNinINmK2YXZg9mG2YMg2KfYs9iq2K7Yr9in2YUg2YfYsNinINin2YTYqNmI2KosINiq2YjYp9i12YQg2YXYuSAgW9in2YTZhdi32YjYsV0oaHR0cHM6Ly90Lm1lL0hVQ0JPVCkg2YTYpdmG2LTYp9ihINio2YjYqiDYrtin2LUg2KjZg/CfmYPimaXvuI8uPC9iPiIsIGRpc2FibGVfd2ViX3BhZ2VfcHJldmlldz1UcnVlKQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIExPR0dFUi5lcnJvcihlLCBleGNfaW5mbz1UcnVlKQogICAgICAgIHBhc3MKCgpAQ2xpZW50Lm9uX21lc3NhZ2UoZmlsdGVycy5wcml2YXRlICYgZmlsdGVycy5tZWRpYSAmIGZpbHRlcnMubWUgJiByZWNfZmlsdGVyKQphc3luYyBkZWYgZHVtYl90b19sb2coY2xpZW50LCBtZXNzYWdlKToKICAgIGlmIG1lc3NhZ2UudmlkZW8gYW5kIG1lc3NhZ2UudmlkZW8uZmlsZV9uYW1lID09ICJyZWNvcmQubXA0IjoKICAgICAgICBhd2FpdCBtZXNzYWdlLmNvcHkoaW50KENvbmZpZy5SRUNPUkRJTkdfRFVNUCkpCiAgICAgICAgRFVNQkVELmFwcGVuZCgidmlkZW8iKQogICAgaWYgbWVzc2FnZS5hdWRpbyBhbmQgbWVzc2FnZS5hdWRpby5maWxlX25hbWUgPT0gInJlY29yZC5vZ2ciOgogICAgICAgIGF3YWl0IG1lc3NhZ2UuY29weShpbnQoQ29uZmlnLlJFQ09SRElOR19EVU1QKSkKICAgICAgICBEVU1CRUQuYXBwZW5kKCJhdWRpbyIpCiAgICBpZiBDb25maWcuSVNfVklERU9fUkVDT1JEOgogICAgICAgIGlmIGxlbihEVU1CRUQpID09IDI6CiAgICAgICAgICAgIERVTUJFRC5jbGVhcigpCiAgICAgICAgICAgIENvbmZpZy5MSVNURU49RmFsc2UKICAgIGVsc2U6CiAgICAgICAgaWYgbGVuKERVTUJFRCkgPT0gMToKICAgICAgICAgICAgRFVNQkVELmNsZWFyKCkKICAgICAgICAgICAgQ29uZmlnLkxJU1RFTj1GYWxzZQoKICAgIApAQ2xpZW50Lm9uX21lc3NhZ2UoZmlsdGVycy5zZXJ2aWNlICYgZmlsdGVycy5jaGF0KENvbmZpZy5DSEFUKSkKYXN5bmMgZGVmIHNlcnZpY2VfbXNnKGNsaWVudCwgbWVzc2FnZSk6CiAgICBpZiBtZXNzYWdlLnNlcnZpY2UgPT0gJ3ZvaWNlX2NoYXRfc3RhcnRlZCc6CiAgICAgICAgQ29uZmlnLklTX0FDVElWRT1UcnVlCiAgICAgICAgaz1zY2hlZHVsZXIuZ2V0X2pvYihzdHIoQ29uZmlnLkNIQVQpLCBqb2JzdG9yZT1Ob25lKSAjc2NoZWR1bGVkIHJlY29yZHMKICAgICAgICBpZiBrOgogICAgICAgICAgICBhd2FpdCBzdGFydF9yZWNvcmRfc3RyZWFtKCkKICAgICAgICAgICAgTE9HR0VSLmluZm8oIlJlc3VtaW5nIHJlY29yZGluZy4uIikKICAgICAgICBlbGlmIENvbmZpZy5XQVNfUkVDT1JESU5HOgogICAgICAgICAgICBMT0dHRVIuaW5mbygiUHJldmlvdXMgcmVjb3JkaW5nIHdhcyBlbmRlZCB1bmV4cGVjdGVkbHksIE5vdyByZXN1bWluZyByZWNvcmRpbmdzLiIpCiAgICAgICAgICAgIGF3YWl0IHN0YXJ0X3JlY29yZF9zdHJlYW0oKSNmb3IgdW5zY2hlZHVsZWQKICAgICAgICBhID0gYXdhaXQgY2xpZW50LnNlbmQoCiAgICAgICAgICAgICAgICBHZXRGdWxsQ2hhbm5lbCgKICAgICAgICAgICAgICAgICAgICBjaGFubmVsPSgKICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgY2xpZW50LnJlc29sdmVfcGVlcigKICAgICAgICAgICAgICAgICAgICAgICAgICAgIENvbmZpZy5DSEFUCiAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICApCiAgICAgICAgaWYgYS5mdWxsX2NoYXQuY2FsbCBpcyBub3QgTm9uZToKICAgICAgICAgICAgQ29uZmlnLkNVUlJFTlRfQ0FMTD1hLmZ1bGxfY2hhdC5jYWxsLmlkCiAgICAgICAgTE9HR0VSLmluZm8oIlZvaWNlIGNoYXQgc3RhcnRlZC4iKQogICAgICAgIGF3YWl0IHN5bmNfdG9fZGIoKQogICAgZWxpZiBtZXNzYWdlLnNlcnZpY2UgPT0gJ3ZvaWNlX2NoYXRfc2NoZWR1bGVkJzoKICAgICAgICBMT0dHRVIuaW5mbygiVm9pY2VDaGF0IFNjaGVkdWxlZCIpCiAgICAgICAgQ29uZmlnLklTX0FDVElWRT1GYWxzZQogICAgICAgIENvbmZpZy5IQVNfU0NIRURVTEU9VHJ1ZQogICAgICAgIGF3YWl0IHN5bmNfdG9fZGIoKQogICAgZWxpZiBtZXNzYWdlLnNlcnZpY2UgPT0gJ3ZvaWNlX2NoYXRfZW5kZWQnOgogICAgICAgIENvbmZpZy5JU19BQ1RJVkU9RmFsc2UKICAgICAgICBMT0dHRVIuaW5mbygiVm9pY2VjaGF0IGVuZGVkIikKICAgICAgICBDb25maWcuQ1VSUkVOVF9DQUxMPU5vbmUKICAgICAgICBpZiBDb25maWcuSVNfUkVDT1JESU5HOgogICAgICAgICAgICBDb25maWcuV0FTX1JFQ09SRElORz1UcnVlCiAgICAgICAgICAgIGF3YWl0IHN0b3BfcmVjb3JkaW5nKCkKICAgICAgICBhd2FpdCBzeW5jX3RvX2RiKCkKICAgIGVsc2U6CiAgICAgICAgcGFzcwoKQENsaWVudC5vbl9yYXdfdXBkYXRlKCkKYXN5bmMgZGVmIGhhbmRsZV9yYXdfdXBkYXRlcyhjbGllbnQ6IENsaWVudCwgdXBkYXRlOiBVcGRhdGUsIHVzZXI6IGRpY3QsIGNoYXQ6IGRpY3QpOgogICAgaWYgaXNpbnN0YW5jZSh1cGRhdGUsIFVwZGF0ZUdyb3VwQ2FsbFBhcnRpY2lwYW50cyk6CiAgICAgICAgaWYgbm90IENvbmZpZy5DVVJSRU5UX0NBTEw6CiAgICAgICAgICAgIGEgPSBhd2FpdCBjbGllbnQuc2VuZCgKICAgICAgICAgICAgICAgIEdldEZ1bGxDaGFubmVsKAogICAgICAgICAgICAgICAgICAgIGNoYW5uZWw9KAogICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBjbGllbnQucmVzb2x2ZV9wZWVyKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgQ29uZmlnLkNIQVQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgaWYgYS5mdWxsX2NoYXQuY2FsbCBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgIENvbmZpZy5DVVJSRU5UX0NBTEw9YS5mdWxsX2NoYXQuY2FsbC5pZAogICAgICAgIGlmIENvbmZpZy5DVVJSRU5UX0NBTEwgYW5kIHVwZGF0ZS5jYWxsLmlkID09IENvbmZpZy5DVVJSRU5UX0NBTEw6CiAgICAgICAgICAgIGFsbD11cGRhdGUucGFydGljaXBhbnRzCiAgICAgICAgICAgIG9sZD1saXN0KGZpbHRlcihsYW1iZGEgazprLnBlZXIudXNlcl9pZCBpZiBoYXNhdHRyKGsucGVlciwndXNlcl9pZCcpIGVsc2Ugay5wZWVyLmNoYW5uZWxfaWQgPT0gQ29uZmlnLlVTRVJfSUQsIGFsbCkpCiAgICAgICAgICAgIGlmIG9sZDoKICAgICAgICAgICAgICAgIGZvciBtZSBpbiBvbGQ6CiAgICAgICAgICAgICAgICAgICAgaWYgbWUudm9sdW1lOgogICAgICAgICAgICAgICAgICAgICAgICBDb25maWcuVk9MVU1FPXJvdW5kKGludChtZS52b2x1bWUpLzEwMCkKCgogICAgaWYgaXNpbnN0YW5jZSh1cGRhdGUsIFVwZGF0ZUdyb3VwQ2FsbCkgYW5kICh1cGRhdGUuY2hhdF9pZCA9PSBpbnQoLTEwMDAwMDAwMDAwMDAtQ29uZmlnLkNIQVQpKToKICAgICAgICBpZiB1cGRhdGUuY2FsbCBpcyBOb25lOgogICAgICAgICAgICBDb25maWcuSVNfQUNUSVZFID0gRmFsc2UKICAgICAgICAgICAgQ29uZmlnLkNVUlJFTlRfQ0FMTD1Ob25lCiAgICAgICAgICAgIExPR0dFUi53YXJuaW5nKCJObyBBY3RpdmUgR3JvdXAgQ2FsbHMgRm91bmQuIikKICAgICAgICAgICAgaWYgQ29uZmlnLklTX1JFQ09SRElORzoKICAgICAgICAgICAgICAgIENvbmZpZy5XQVNfUkVDT1JESU5HPVRydWUKICAgICAgICAgICAgICAgIGF3YWl0IHN0b3BfcmVjb3JkaW5nKCkKICAgICAgICAgICAgICAgIExPR0dFUi53YXJuaW5nKCJHcm91cCBjYWxsIHdhcyBlbmRlZCBhbmQgaGVuY2Ugc3RvcGluZyByZWNvcmRpbmcuIikKICAgICAgICAgICAgQ29uZmlnLkhBU19TQ0hFRFVMRSA9IEZhbHNlCiAgICAgICAgICAgIGF3YWl0IHN5bmNfdG9fZGIoKQogICAgICAgICAgICByZXR1cm4KCiAgICAgICAgZWxzZToKICAgICAgICAgICAgY2FsbD11cGRhdGUuY2FsbAogICAgICAgICAgICBpZiBpc2luc3RhbmNlKGNhbGwsIEdyb3VwQ2FsbERpc2NhcmRlZCk6CiAgICAgICAgICAgICAgICBDb25maWcuQ1VSUkVOVF9DQUxMPU5vbmUKICAgICAgICAgICAgICAgIENvbmZpZy5JU19BQ1RJVkU9RmFsc2UKICAgICAgICAgICAgICAgIGlmIENvbmZpZy5JU19SRUNPUkRJTkc6CiAgICAgICAgICAgICAgICAgICAgQ29uZmlnLldBU19SRUNPUkRJTkc9VHJ1ZQogICAgICAgICAgICAgICAgICAgIGF3YWl0IHN0b3BfcmVjb3JkaW5nKCkKICAgICAgICAgICAgICAgIExPR0dFUi53YXJuaW5nKCJHcm91cCBDYWxsIFdhcyBlbmRlZCIpCiAgICAgICAgICAgICAgICBDb25maWcuQ0FMTF9TVEFUVVMgPSBGYWxzZQogICAgICAgICAgICAgICAgYXdhaXQgc3luY190b19kYigpCiAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgQ29uZmlnLklTX0FDVElWRT1UcnVlCiAgICAgICAgICAgIENvbmZpZy5DVVJSRU5UX0NBTEw9Y2FsbC5pZAogICAgICAgICAgICBpZiBDb25maWcuSVNfUkVDT1JESU5HIGFuZCBub3QgY2FsbC5yZWNvcmRfdmlkZW9fYWN0aXZlOgogICAgICAgICAgICAgICAgQ29uZmlnLkxJU1RFTj1UcnVlCiAgICAgICAgICAgICAgICBhd2FpdCBzdG9wX3JlY29yZGluZygpCiAgICAgICAgICAgICAgICBMT0dHRVIud2FybmluZygiUmVjb3JkaW5nIHdhcyBlbmRlZCBieSB1c2VyLCBoZW5jZSBzdG9wcGluZyB0aGUgc2NoZWR1bGVzLiIpCiAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgaWYgY2FsbC5zY2hlZHVsZV9kYXRlOgogICAgICAgICAgICAgICAgQ29uZmlnLkhBU19TQ0hFRFVMRT1UcnVlCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBDb25maWcuSEFTX1NDSEVEVUxFPUZhbHNlCiAgICAgICAgYXdhaXQgc3luY190b19kYigpCiAKQGdyb3VwX2NhbGwub25fcmF3X3VwZGF0ZSgpCmFzeW5jIGRlZiBoYW5kbGVyKGNsaWVudDogUHlUZ0NhbGxzLCB1cGRhdGU6IFVwZGF0ZSk6CiAgICBpZiBpc2luc3RhbmNlKHVwZGF0ZSwgSm9pbmVkVm9pY2VDaGF0KToKICAgICAgICBDb25maWcuQ0FMTF9TVEFUVVMgPSBUcnVlCiAgICAgICAgaWYgQ29uZmlnLkVESVRfVElUTEU6CiAgICAgICAgICAgIGF3YWl0IGVkaXRfdGl0bGUoKQogICAgICAgIHdobz1hd2FpdCBncm91cF9jYWxsLmdldF9wYXJ0aWNpcGFudHMoQ29uZmlnLkNIQVQpCiAgICAgICAgeW91PWxpc3QoZmlsdGVyKGxhbWJkYSBrOmsudXNlcl9pZCA9PSBDb25maWcuVVNFUl9JRCwgd2hvKSkKICAgICAgICBpZiB5b3U6CiAgICAgICAgICAgIGZvciBtZSBpbiB5b3U6CiAgICAgICAgICAgICAgICBpZiBtZS52b2x1bWU6CiAgICAgICAgICAgICAgICAgICAgQ29uZmlnLlZPTFVNRT1yb3VuZChpbnQobWUudm9sdW1lKSkKICAgIGVsaWYgaXNpbnN0YW5jZSh1cGRhdGUsIExlZnRWb2ljZUNoYXQpOgogICAgICAgIENvbmZpZy5DQUxMX1NUQVRVUyA9IEZhbHNlCiAgICBlbGlmIGlzaW5zdGFuY2UodXBkYXRlLCBQYXVzZWRTdHJlYW0pOgogICAgICAgIENvbmZpZy5EVVJbJ1BBVVNFJ10gPSB0aW1lLnRpbWUoKQogICAgICAgIENvbmZpZy5QQVVTRT1UcnVlCiAgICBlbGlmIGlzaW5zdGFuY2UodXBkYXRlLCBSZXN1bWVkU3RyZWFtKToKICAgICAgICBwYXVzZT1Db25maWcuRFVSLmdldCgnUEFVU0UnKQogICAgICAgIGlmIHBhdXNlOgogICAgICAgICAgICBkaWZmID0gdGltZS50aW1lKCkgLSBwYXVzZQogICAgICAgICAgICBzdGFydD1Db25maWcuRFVSLmdldCgnVElNRScpCiAgICAgICAgICAgIGlmIHN0YXJ0OgogICAgICAgICAgICAgICAgQ29uZmlnLkRVUlsnVElNRSddPXN0YXJ0K2RpZmYKICAgICAgICBDb25maWcuUEFVU0U9RmFsc2UKICAgIGVsaWYgaXNpbnN0YW5jZSh1cGRhdGUsIE11dGVkU3RyZWFtKToKICAgICAgICBDb25maWcuTVVURUQgPSBUcnVlCiAgICBlbGlmIGlzaW5zdGFuY2UodXBkYXRlLCBVbk11dGVkU3RyZWFtKToKICAgICAgICBDb25maWcuTVVURUQgPSBGYWxzZQoKCgpAZ3JvdXBfY2FsbC5vbl9zdHJlYW1fZW5kKCkKYXN5bmMgZGVmIGhhbmRsZXIoY2xpZW50OiBQeVRnQ2FsbHMsIHVwZGF0ZTogVXBkYXRlKToKICAgIGlmIGlzaW5zdGFuY2UodXBkYXRlLCBTdHJlYW1BdWRpb0VuZGVkKSBvciBpc2luc3RhbmNlKHVwZGF0ZSwgU3RyZWFtVmlkZW9FbmRlZCk6CiAgICAgICAgaWYgbm90IENvbmZpZy5TVFJFQU1fRU5ELmdldCgiU1RBVFVTIik6CiAgICAgICAgICAgIENvbmZpZy5TVFJFQU1fRU5EWyJTVEFUVVMiXT1zdHIodXBkYXRlKQogICAgICAgICAgICBpZiBDb25maWcuU1RSRUFNX0xJTksgYW5kIGxlbihDb25maWcucGxheWxpc3QpID09IDA6CiAgICAgICAgICAgICAgICBpZiBDb25maWcuSVNfTE9PUDoKICAgICAgICAgICAgICAgICAgICBhd2FpdCBzdHJlYW1fZnJvbV9saW5rKENvbmZpZy5TVFJFQU1fTElOSykKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgYXdhaXQgbGVhdmVfY2FsbCgpCiAgICAgICAgICAgIGVsaWYgbm90IENvbmZpZy5wbGF5bGlzdDoKICAgICAgICAgICAgICAgIGlmIENvbmZpZy5JU19MT09QOgogICAgICAgICAgICAgICAgICAgIGF3YWl0IHN0YXJ0X3N0cmVhbSgpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIGF3YWl0IGxlYXZlX2NhbGwoKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgYXdhaXQgc2tpcCgpICAgICAgICAgIAogICAgICAgICAgICBhd2FpdCBzbGVlcCgxNSkgI3dhaXQgZm9yIG1heCAxNSBzZWMKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgZGVsIENvbmZpZy5TVFJFQU1fRU5EWyJTVEFUVVMiXQogICAgICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgICAgICBwYXNzCiAgICAgICAgZWxzZToKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgZGVsIENvbmZpZy5TVFJFQU1fRU5EWyJTVEFUVVMiXQogICAgICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgICAgICBwYXNzCgogICAgICAgCgo='))